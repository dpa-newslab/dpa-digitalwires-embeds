{"version":3,"file":"js/dnl_embeds.js","mappings":"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","sources":["webpack://dpa-digitalwires-embeds/./src/js/modules/DNLEmbed.js","webpack://dpa-digitalwires-embeds/./node_modules/@webcomponents/shadycss/src/interface.js","webpack://dpa-digitalwires-embeds/./src/js/index.js","webpack://dpa-digitalwires-embeds/./src/js/modules/DNLDwChart.js","webpack://dpa-digitalwires-embeds/./src/js/modules/DNLImage.js","webpack://dpa-digitalwires-embeds/./src/js/modules/DNLTwitterEmbed.js","webpack://dpa-digitalwires-embeds/./src/js/helpers.js","webpack://dpa-digitalwires-embeds/./src/js/modules/DNLYoutubeEmbed.js","webpack://dpa-digitalwires-embeds/./src/js/modules/DNLWebchart.js"],"sourcesContent":["/* -*- coding: utf-8 -*-\n\n Copyright 2022 dpa-IT Services GmbH\n\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\nimport * as shadyCss from '@webcomponents/shadycss';\n\n//Superclass for all DNLEmbeds\nexport class DNLEmbed extends HTMLElement {\n    constructor(attachShadowRoot=true) {\n        super();\n        if(attachShadowRoot){\n            this.attachShadow({\n                mode: 'open'\n            });\n        }\n        this.idPrefix = \"dnlembed-\";\n    }\n  \n    connectedCallback(){\n        this.setupComponent();\n        this.updateComponent();\n        this.polyfill();\n        window.addEventListener(\"message\", (a) => this.resize(a));\n    }\n\n    attributeChangedCallback(name, oldValue, newValue){\n        if(oldValue){\n            this.updateComponent();\n            this.polyfill();\n        }\n    }\n\n    disconnectedCallback(){\n        if(this.shadowRoot){\n            this.shadowRoot.innerHTML = \"\";\n        }else{\n            this.innerHTML = \"\";\n        }\n    }\n\n    setupComponent(){\n        console.log(\"setupComponent must be implemented by subclass\")\n    }\n\n    updateComponent(){\n        console.log(\"updateComponent must be implemented by subclass\")\n    }\n\n    resize(postedMessage) {\n        console.log(\"Resize method must be implemented by subclass\");\n    }\n\n    polyfill(){\n        //Check if shadyCss polyfill is active\n        if(typeof(ShadyCSS) === \"undefined\") return \n        \n        //Check if \n        if(!this.shadowRoot) return\n\n        const template = document.createElement(\"template\");\n        template.innerHTML = this.shadowRoot.innerHTML;\n        shadyCss.prepareTemplate(template, this.localName)\n        \n        this.shadowRoot.innerHTML = template.innerHTML;\n    }\n};","/**\n * @license\n * Copyright (c) 2020 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\nfunction setProperties(element, properties) {\n    const style = element.style;\n    for (const [propertyName, value] of Object.entries(properties)) {\n        style.setProperty(propertyName, value);\n    }\n}\n/**\n * True if the ShadyCSS scoped style polyfill is loaded and active.\n *\n * Note that the other functions in this module are safe to call even if the\n * polyfills are not loaded.\n */\nfunction scopedStylesArePolyfilled() {\n    return (window.ShadyCSS !== undefined && window.ShadyCSS.nativeShadow === false);\n}\n/**\n * True if the ShadyCSS custom properties polyfill is loaded and active.\n *\n * Note that the other functions in this module are safe to call even if the\n * polyfills are not loaded.\n */\nfunction customPropertiesArePolyfilled() {\n    return window.ShadyCSS !== undefined && window.ShadyCSS.nativeCss === false;\n}\n/**\n * Prepare the given custom element template for use with the ShadyCSS style\n * scoping polyfill. You only need to do this once per template.\n *\n * If ShadyCSS is not active, then this function does nothing.\n *\n * If ShadyCSS is active, then after styleElement is called on the first\n * instance of this element, <style> tags within this template will be moved to\n * the <head> and re-written to use globally scoped rules that emulate scoped\n * behavior.\n *\n * Note that LitElement and Polymer Library users do not typically need to call\n * this function, because it is called automatically.\n */\nexport function prepareTemplate(template, customElementName) {\n    if (scopedStylesArePolyfilled()) {\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        window.ShadyCSS.prepareTemplate(template, customElementName);\n    }\n}\n/**\n * Activate scoped styles for the given element instance. This function should\n * typically be called inside connectedCallback. The template of this element\n * class must already have been registered with prepareTemplate.\n *\n * If ShadyCSS is not active, then this function does nothing.\n *\n * Note that LitElement and Polymer Library users do not typically need to call\n * this function, because it is called automatically.\n */\nexport function styleElement(element) {\n    if (scopedStylesArePolyfilled()) {\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        window.ShadyCSS.styleElement(element);\n    }\n}\n/**\n * Propagate CSS custom properties on this element to all descendant shadow\n * roots, and optionally set new ones.\n *\n * Uses ShadyCSS custom property emulation if the polyfill is active, otherwise\n * calls native style.setProperty.\n */\nexport function styleSubtree(element, properties) {\n    if (customPropertiesArePolyfilled()) {\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        window.ShadyCSS.styleSubtree(element, properties);\n    }\n    else if (properties != null) {\n        setProperties(element, properties);\n    }\n}\n//# sourceMappingURL=interface.js.map","/* -*- coding: utf-8 -*-\r\n\r\n Copyright 2022 dpa-IT Services GmbH\r\n\r\n Licensed under the Apache License, Version 2.0 (the \"License\");\r\n you may not use this file except in compliance with the License.\r\n You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n Unless required by applicable law or agreed to in writing, software\r\n distributed under the License is distributed on an \"AS IS\" BASIS,\r\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n See the License for the specific language governing permissions and\r\n limitations under the License.\r\n*/\r\n\r\nconst defineCustomElement = (name, element) => {\r\n    if(!customElements.get(name)){\r\n        customElements.define(name, element)\r\n    }\r\n};\r\n\r\nimport {DNLDwChart} from './modules/DNLDwChart';\r\ndefineCustomElement(\"dnl-dwchart\", DNLDwChart);\r\n\r\nimport {DNLImage} from './modules/DNLImage';\r\ndefineCustomElement(\"dnl-image\", DNLImage);\r\n\r\nimport {DNLTwitterEmbed} from './modules/DNLTwitterEmbed';\r\ndefineCustomElement(\"dnl-twitterembed\", DNLTwitterEmbed);\r\n\r\nimport {DNLYoutubeEmbed} from './modules/DNLYoutubeEmbed';\r\ndefineCustomElement(\"dnl-youtubeembed\", DNLYoutubeEmbed);\r\n\r\nimport {DNLWebchart} from './modules/DNLWebchart';\r\ndefineCustomElement(\"dnl-wgchart\", DNLWebchart);\r\n","/* -*- coding: utf-8 -*-\n\n Copyright 2022 dpa-IT Services GmbH\n\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\nimport {DNLEmbed} from './DNLEmbed.js';\n\n//Webcomponent displaying Datawrapper-charts, inherits from DNLEmbed\nexport class DNLDwChart extends DNLEmbed {\n    static get observedAttributes(){\n        return [\"src\"];\n    }\n    \n    constructor() {\n        super();\n        //Change default id-prefix\n        this.idPrefix = \"dwchart-\";\n    }\n\n    setupComponent() {\n        const style = document.createElement(\"style\");\n        style.textContent = `\n            :host{\n                display: flex;\n                margin: 0 auto;\n                max-width: 800px;\n            }\n            \n            iframe{\n                border: none;\n                width: 100%;\n            }`\n        this.shadowRoot.appendChild(style);\n\n        this.iframe = document.createElement(\"iframe\");\n        \n        this.iframe.frameborder = \"0\";\n        this.shadowRoot.appendChild(this.iframe);\n    }\n\n    updateComponent(){\n        const {\n            iframe,\n            idPrefix\n        } = this;\n\n        const src = this.getAttribute(\"src\");\n        if (!src){\n            console.error(\"No dw-source specified\");\n            return;\n        }\n\n        iframe.src = src;\n        const pathparts = new URL(src).pathname.split(\"/\")\n        \n        let chartId = pathparts[1];\n        iframe.id = idPrefix + chartId;\n    }\n\n    //Making iframe responsive\n    resize(postedMessage) {\n        //Adapted method used by datawrapper-embed-script that uses a postMessage-pattern\n        if (void 0 !== postedMessage.data[\"datawrapper-height\"]) {\n            for (var e in postedMessage.data[\"datawrapper-height\"]) {\n                if (e == this.iframe.id.slice(this.idPrefix.length)) {\n                    this.iframe.style.height = postedMessage.data[\"datawrapper-height\"][e] + \"px\";\n                }\n            }\n        }\n    }\n}\n","/* -*- coding: utf-8 -*-\n\n Copyright 2022 dpa-IT Services GmbH\n\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\nimport {DNLEmbed} from './DNLEmbed.js';\n\nexport class DNLImage extends DNLEmbed{\n    static get observedAttributes(){\n        return [\"src\", \"alt\", \"title\", \"caption\", \"creditline\"];\n    }\n    \n    constructor(){\n        super(); \n    }\n\n    setupComponent(){\n        this.classList.add(\"empty\");\n        this.figure = document.createElement(\"figure\");\n        this.img = document.createElement(\"img\");\n        this.figcaption = document.createElement(\"figcaption\");\n        this.caption = document.createElement(\"p\");\n        this.creditline = document.createElement(\"p\");\n\n        const {          \n            figure,  \n            figcaption,\n            img,\n            caption,\n            creditline,\n            shadowRoot\n        } = this;\n\n        figure.setAttribute(\"part\", \"figure\");\n        figcaption.setAttribute(\"part\", \"figcaption\");\n        img.setAttribute(\"part\", \"img\");\n        caption.setAttribute(\"part\", \"caption\");\n        creditline.setAttribute(\"part\", \"creditline\");\n\n        let style = document.createElement(\"style\");\n        style.textContent = `\n            :host{\n                display: block;\n                margin: 0 auto;\n                max-width: 800px;\n            }\n            \n            :host(.empty){\n                display: none;\n            }\n\n            figure{\n                margin: 0;\n                position: relative;\n            }\n\n            img{\n                display: block;\n                height: auto;\n                width: 100%;\n            }\n\n            figcaption{\n                background: rgba(255, 255, 255, 0.8);\n                bottom: 0;\n                box-sizing: border-box;\n                display: block;\n                left: 0;\n                padding: 15px;\n                position: absolute;\n                width: 100%;\n            }\n\n            :host(.is-feature) figcaption{\n                padding: 0;\n                position: relative;\n            }\n\n            figcaption p{\n                margin: 0;\n            }\n\n            figcaption p.title{\n                font-weight: 600;\n                margin-bottom: 3px;\n            }\n\n            figcaption p.title+p.caption{\n                font-size: .7em\n            }\n\n            p.creditline{\n                font-size: .7em;\n                font-style: italic;\n                text-align: right;\n            }\n        `\n\n        shadowRoot.appendChild(style);\n\n        figure.appendChild(img);\n\n        caption.classList.add(\"caption\");\n        figcaption.appendChild(caption);\n\n        creditline.classList.add(\"creditline\");\n        figcaption.appendChild(creditline);\n\n        figure.appendChild(figcaption);\n        shadowRoot.appendChild(figure);\n    }\n\n    updateComponent(){\n        const {\n            img,\n            caption,\n            creditline,\n            figcaption\n        } = this;\n\n        if(!this.getAttribute(\"src\")){\n            this.classList.add(\"empty\");\n            return;\n        }\n        \n        img.setAttribute(\"src\", this.getAttribute(\"src\"));\n        img.setAttribute(\"alt\", this.getAttribute(\"alt\"));\n        \n        const titleElement = this.figcaption.querySelector(\"p.title\");\n        const titleAttribute = this.getAttribute(\"title\");\n        if(titleElement !== null){\n            if(titleAttribute){\n                const title = document.createElement(\"p\");\n                title.classList.add(\"title\");\n                title.innerHTML = this.getAttribute(\"title\");\n                figcaption.prepend(title);\n            }else{\n                titleElement.setAttribute(\"part\", \"title\");\n                titleElement.innerHTML = titleAttribute;\n            }\n        }else if(titleAttribute){\n            const title = document.createElement(\"p\");\n            title.classList.add(\"title\");\n            title.innerHTML = this.getAttribute(\"title\");\n            figcaption.prepend(title);\n        }\n\n        caption.innerHTML = this.getAttribute(\"caption\");\n        creditline.innerHTML = `Foto: ${this.getAttribute(\"creditline\")}`;\n\n        this.classList.remove(\"empty\");\n    }\n    resize(){\n        //Resized by CSS\n    }\n}\n","/* -*- coding: utf-8 -*-\n\n Copyright 2022 dpa-IT Services GmbH\n\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\nimport {DNLEmbed} from './DNLEmbed.js';\n\nimport {addScript} from '../helpers.js';\n\n//Webcomponent creating Twitter-embed\nexport class DNLTwitterEmbed extends DNLEmbed{\n    static get observedAttributes(){\n        return [\"src\"];\n    }\n    \n    constructor(){\n        //Shadow DOM can't be used atm (https://twittercommunity.com/t/widgets-createtweet-experiment/139144)\n        super(false);\n    }\n\n    setupComponent(){\n        const style = document.createElement(\"style\");\n        style.textContent = `\n            :host{\n                align-items: center;\n                display: flex;\n                justify-content: center;\n                margin: 0 auto;\n                max-width: 800px;\n                width: 100%;\n            }\n            div.container{\n                align-items: center;\n                display: flex;\n                justify-content: center;\n                width: 100%;\n            }\n\n            div.container iframe {\n                min-height: 10px;\n                min-width: 10px;\n            }\n        `;\n        this.appendChild(style);\n    }\n\n    updateComponent(){\n        console.log(\"Update tweet\")\n        const src = this.getAttribute(\"src\");\n\n        if(!src){\n            console.error(\"no twitter-src\");\n            return;\n        }\n\n        const urlData = new URL(src);\n\n        const splittedPath = urlData.pathname.split(\"/\");\n        let tweetId;\n        if(splittedPath[2] !== \"status\"){\n            console.error(\"Specified Tweet-URL \" + src + \" does not match required format\");\n            return;\n        }else{\n            tweetId = splittedPath[3]\n        }\n\n        //compile widget\n        if(typeof window.twttr === \"undefined\") {\n            let twttrScript = addScript(\"https://platform.twitter.com/widgets.js\");\n\n            const prevTwttrOnload = twttrScript.onload;\n            twttrScript.onload = (() => {\n                if(prevTwttrOnload) prevTwttrOnload();\n                this._createTweet(tweetId);\n            })\n        }else{\n            this._createTweet(tweetId);\n        }\n    }\n\n    _createTweet(tweetId){\n        if(this.content){\n           this.removeChild(this.content);\n        }\n\n        this.content = document.createElement(\"div\");\n        this.content.classList.add(\"container\");\n                \n        window.twttr.widgets.createTweet(tweetId, this.content, {conversation: \"none\", dnt: true}).then(this._addErrorMessage.bind(this))\n        \n        this.appendChild(this.content)\n    }\n\n    _addErrorMessage(el){\n        if(el === undefined){\n            this.content.innerHTML = `<p>Der hier zuvor <a href=\\\"${this.getAttribute(\"src\")}\\\">eingegebette Tweet</a> ist nicht (mehr) verf√ºgbar.</p>`;\n        }\n    }\n\n    resize(postedMessage){\n        //console.log(postedMessage)\n    }\n}","/* -*- coding: utf-8 -*-\n\n Copyright 2022 dpa-IT Services GmbH\n\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\nfunction addScript(src){\n    let scriptEls = document.querySelectorAll(`script[src=\"${src}\"]`);\n    if(scriptEls.length == 0){\n        let scriptEl = document.createElement('script');\n        scriptEl.setAttribute(\"src\", src);\n        scriptEl.setAttribute(\"async\", \"async\");\n        document.body.appendChild(scriptEl);\n        return scriptEl;\n    }else{\n        return scriptEls[0];\n    }\n}\n\nfunction getHashCode(urn) {\n    //https://stackoverflow.com/questions/7616461/generate-a-hash-from-string-in-javascript\n    let hash = 0,\n        i, chr;\n    if (urn.length === 0) return hash;\n    for (i = 0; i < urn.length; i++) {\n        chr = urn.charCodeAt(i);\n        hash = ((hash << 5) - hash) + chr;\n        hash |= 0; // Convert to 32bit integer\n    }\n    return Math.abs(hash);\n};\n\n\nexport {addScript, getHashCode};","/* -*- coding: utf-8 -*-\n\n Copyright 2022 dpa-IT Services GmbH\n\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\nimport {DNLEmbed} from './DNLEmbed.js';\n\n//Webcomponent creating youtube iframe\nexport class DNLYoutubeEmbed extends DNLEmbed{\n    static get observedAttributes(){\n        return [\"src\"];\n    }\n    \n    constructor(){\n        super();\n    }\n\n    setupComponent(){\n        const {\n            shadowRoot\n        } = this;\n        let style = document.createElement(\"style\");\n        style.textContent = `\n            :host{\n                align-items: center;\n                display: flex;\n                justify-content: center;\n                margin: 0 auto;\n                max-width: 800px;\n                width: 100%\n            }            \n            .wrapper{\n                padding-bottom: 56.25%;\n                position: relative;\n                width: 100%;\n            }            \n            iframe{\n                height: 100%;\n                left: 0;\n                position: absolute;\n                top: 0;\n                width: 100%;\n            }`\n        \n        shadowRoot.appendChild(style);\n\n        const wrapper = document.createElement(\"div\");\n        wrapper.classList.add(\"wrapper\");\n\n        this.iframe = document.createElement(\"iframe\");\n        this.iframe.setAttribute(\"frameborder\", \"0\");\n        this.iframe.setAttribute(\"allow\", \"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\");\n        wrapper.appendChild(this.iframe);\n\n        shadowRoot.appendChild(wrapper);\n        this.polyfill();\n    }\n\n    updateComponent(){\n        const src = this.getAttribute(\"src\");\n        if(!src) {\n            console.error(\"No youtube-source found\");\n            return;\n        }\n        this.iframe.src = src;\n    }\n\n    resize(postedMessage){\n        //Resized by CSS\n    }\n}\n","/* -*- coding: utf-8 -*-\n\n Copyright 2022 dpa-IT Services GmbH\n\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\nimport {DNLEmbed} from './DNLEmbed.js';\n\nimport {getHashCode} from '../helpers.js';\n\n//Webcomponent displaying dpa-Webgrafiken\nexport class DNLWebchart extends DNLEmbed {\n    static get observedAttributes(){\n        return [\"src\"];\n    }\n\n    constructor() {\n        super();\n        //Change default id-prefix\n        this.idPrefix = \"wg-\";\n    }\n\n    setupComponent() {\n        this.iframe = document.createElement(\"iframe\");\n\n        const {\n            shadowRoot,\n            iframe\n        } = this;\n        \n        \n        iframe.setAttribute(\"frameborder\", \"0\");\n        shadowRoot.appendChild(iframe);\n\n        const style = document.createElement(\"style\");\n        style.textContent = `\n            :host{\n                display: block;\n                margin: 0 auto;\n                max-width: 800px;\n            }\n            iframe{\n                border: none;\n                height: 520px;\n                width: 100%;\n            }\n        `\n        shadowRoot.appendChild(style);\n\n        iframe.style=\"height: 1px;min-height:1px;\"\n        shadowRoot.appendChild(iframe);\n        \n        this.polyfill();\n    }\n\n    updateComponent(){\n        const {\n            iframe,\n            idPrefix\n        } = this;\n\n        const src = this.getAttribute(\"src\");\n        if(!src){\n            console.error(\"No webchart-source specified\");\n        }\n\n        this.origin = new URL(src).origin;\n\n        iframe.id = idPrefix + getHashCode(src);\n        iframe.src = `${src}&childId=${iframe.id}&clientHeight=1`;\n    }\n\n    resize(postedMessage) {\n        //Adapted method from pym.js - listening to posted message having the elements id\n        if(postedMessage.origin == this.origin){\n            if(typeof (postedMessage.data) == \"string\" && \"pym\" == postedMessage.data.slice(0, 3)){\n                let message = postedMessage.data.split(\"x\");\n                if (message[2] == this.iframe.id) {\n                    this.iframe.style.height = message.slice(-1) + \"px\"\n                }\n            }\n        }\n    }\n}\n"],"names":["DNLEmbed","HTMLElement","constructor","attachShadowRoot","super","this","attachShadow","mode","idPrefix","connectedCallback","setupComponent","updateComponent","polyfill","window","addEventListener","a","resize","attributeChangedCallback","name","oldValue","newValue","disconnectedCallback","shadowRoot","innerHTML","console","log","postedMessage","template","document","createElement","customElementName","undefined","ShadyCSS","nativeShadow","prepareTemplate","localName","defineCustomElement","element","customElements","get","define","observedAttributes","style","textContent","appendChild","iframe","frameborder","src","getAttribute","error","chartId","URL","pathname","split","id","data","e","slice","length","height","classList","add","figure","img","figcaption","caption","creditline","setAttribute","titleElement","querySelector","titleAttribute","title","prepend","remove","splittedPath","tweetId","twttr","twttrScript","scriptEls","querySelectorAll","scriptEl","body","addScript","prevTwttrOnload","onload","_createTweet","content","removeChild","widgets","createTweet","conversation","dnt","then","_addErrorMessage","bind","el","wrapper","origin","urn","i","chr","hash","charCodeAt","Math","abs","getHashCode","message"],"sourceRoot":""}